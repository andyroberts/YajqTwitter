(function(c){c.fn.yajqtwitter=function(e){var e=c.extend({},c.fn.yajqtwitter.defaults,e),i={regular:function(b){b=b.text;e.linkify&&(b=b.replace(/\b(http:\/\/[-A-Za-z0-9+&@#/%?=~_()|!:,.;]*[-A-Za-z0-9+&@#/%=~_()|])/ig,"<a href='$1' target=\"_blank\">$1</a>"),b=b.replace(/(@([A-Za-z0-9_]+))/ig,'<a href="http://www.twitter.com/$2" target="_blank">$1</a>'),b=b.replace(/(#([-A-Za-z0-9_]))/ig,'<a href="https://twitter.com/#!/search?q=%23$2" target="_blank">$1</a>'));return'<div class="post-body">'+b+"</div>"}},
f=function(b){return(10>b?"0":"")+b};return this.each(function(){var b=c(this);c.ajax({type:"GET",dataType:"jsonp",data:"trim_user=1&screen_name="+e.username+"&count="+(e.maxNumberOfPosts+1)+(e.includeRetweets?"&include_rts=1":""),url:"https://api.twitter.com/1/statuses/user_timeline.json",success:function(h){if(null!=h){var g="";c.each(h,function(b,c){if(b>e.maxNumberOfPosts)return!1;var a=c.created_at;isNaN(Date.parse(a))&&(a=a.replace(/(\+[0-9]{4}\s)/ig,""));var d="",a=new Date(a),a=a.getUTCFullYear()+
"-"+f(a.getUTCMonth()+1)+"-"+f(a.getUTCDate())+"T"+f(a.getUTCHours())+":"+f(a.getUTCMinutes())+":"+f(a.getUTCSeconds())+"Z",a=new Date((a||"").replace(/-/g,"/").replace(/[TZ]/g," ")),a=((new Date).getTime()-a.getTime())/1E3,d=Math.floor(a/86400),d='<span class="timeago">'+(isNaN(d)||0>d?void 0:0==d&&(60>a&&"just now"||120>a&&"1 minute ago"||3600>a&&Math.floor(a/60)+" minutes ago"||7200>a&&"1 hour ago"||86400>a&&Math.floor(a/3600)+" hours ago")||1==d&&"Yesterday"||7>d&&d+" days ago"||85>d&&Math.ceil(d/
7)+" weeks ago"||"many moons ago")+"</span>";g+='<div class="post">'+i.regular.apply(this,[c])+'<div class="postDate"><a target="_blank" href="http://twitter.com/'+c.user.screen_name+"/status/"+c.id_str+'">'+d+'</a> \u00b7 <a target="_blank" href="http://twitter.com/intent/tweet?in_reply_to='+c.id_str+'">reply</a> \u00b7 <a target="_blank" href="http://twitter.com/intent/retweet?tweet_id='+c.id_str+'">retweet</a> \u00b7 <a target="_blank" href="http://twitter.com/intent/favorite?tweet_id='+c.id_str+
'">favourite</a></div></div>'});b.append('<div class="posts">'+g+"</div>")}},error:function(){}})})};c.fn.yajqtwitter.defaults={linkify:!0,maxNumberOfPosts:5,username:"andyroberts_uk",includeRetweets:!0}})(jQuery);
